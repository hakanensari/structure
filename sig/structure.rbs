module Structure
  def self.new: () ?{ (Structure::Builder) -> void } -> singleton(Data)

  interface _StructureMeta
    def __structure_meta__: () -> {
      attributes: Array[Symbol],
      types: Hash[Symbol, untyped],
      defaults: Hash[Symbol, untyped],
      from: Hash[Symbol, String]
    }
  end

  module ClassMethods
    include _StructureMeta
    def parse: (?(Hash[String | Symbol, untyped] | nil) data, **untyped kwargs) -> instance
    def members: () -> Array[Symbol]
  end

  module InstanceMethods
    def deconstruct: () -> Array[untyped]
    def deconstruct_keys: (Array[Symbol]?) -> Hash[Symbol, untyped]
    def with: (**untyped) -> instance
    def to_h: () -> Hash[Symbol, untyped]
  end
end
